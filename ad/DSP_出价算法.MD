# DSP出价算法
***set_daemon@126.com 2018-04-13***

## 出价算法的目的
为业务提供支持是各种出价算法的需求来源。

## 拣漏
在RTB交易时，一个流量会分发给多个DSP，那么，可能所有平台都会出价，也许所有平台都不出价，所以可以从中拣漏，用最低的价格购买到流量，当只有一个平台参与竞价时，成功交易的价格为底价+0.01元，业务系统提供价格策略，“底价算法”用来解决这个问题。

## 探测
广告主设定一个价格，按照该价格直接出价，那么通过报表可以看出在该价格的竞价成功率，和可以购买到的媒体、广告位。这个算法可以称为“直接价格法”。当成功率比较高时，可以手动调低价格，降低成功率，或者提高价格，提升成功率。

## 随机
广告主不想每次都出高价或底价，而是在之间的价格随机选一个，既能有一定的成功率，也能降低成本。

## 收益
通过计算ecpm，体现当前流量对广告的价值，并作为出价的一个参考。ecpm=C*pctr*1000，这里要提供点击价值，以及预估的点击率，所以技术难点在如何提升点击率预估准确性。

## 参考建议
“探测”法可以通过人工调节价格，来控制竞价成功率，这样，在每次出价时，都可以知道，当前哪个价格是准能购买到流量，哪个价格只能提供80%的概率成功购买，基于这个价格，再与“收益”算法结合使用，当预估当前点击率比较高时，如果追求点击量，则可以按照参考的价格来出价，这个出价甚至可能高于广告主限定的最高价。比如，广告主用5000元购买10000个点击，即C的价格为0.5元，举个极端的情况，点击率预估准确度为100%，对完全有可能发生的点击流量，出高价强购买10000次，即10个cpm，而平均流量成功价高达10元，甚至20元，那么购买流量的成本只需100或200元，毛利高达5000-200=4800元，这就体现了点击率预估和成功价格预估的价值。
该方法有一个强依赖的问题，需要不断拿广告去测试广告位或流量（不同特征的流量购买者出价也存在差异），这样才能画出按时间、按流量特征的价格曲线，再根据这个曲线去计算当前流量的成功价格。实际上持续测广告位价格过于理想，可以退而求其次，实现一个动态价格推荐，实时计算当前的成功率，如果成功率不高，那么就要拉高价格，否则，拉低价格将成功率稳定在一定水平线。
